# Multi drones 

---

### Start the PX4-Gazebo Simulation 

Spawn 3 drones in one Gazebo instance

Terminal 1:

```bash
cd ~/ctuav_gazebo-research/PX4-Autopilot/
PX4_SYS_AUTOSTART=4001 PX4_SIM_MODEL=gz_x500 ./build/px4_sitl_default/bin/px4 -i 1
```

Terminal 2:

```bash
cd ~/ctuav_gazebo-research/PX4-Autopilot/
PX4_GZ_STANDALONE=1 PX4_SYS_AUTOSTART=4001 PX4_GZ_MODEL_POSE="0,2" PX4_SIM_MODEL=gz_x500 ./build/px4_sitl_default/bin/px4 -i 2
```

Terminal 3:

```bash
cd ~/ctuav_gazebo-research/PX4-Autopilot/
PX4_GZ_STANDALONE=1 PX4_SYS_AUTOSTART=4003 PX4_GZ_MODEL_POSE="0,4" PX4_SIM_MODEL=gz_x500 ./build/px4_sitl_default/bin/px4 -i 
```

More vehicle and world models: https://docs.px4.io/v1.15/en/sim_gazebo_gz/


=> Create one file?




### Start QGroundControl and start drone's missions:

```bash
cd ~/ctuav_gazebo-research/Custom_QGC/qgroundcontrol
./build/Debug/QGroundControl
```


### Launch MAVROS

```bash
ros2 launch mavros multi_uas.launch
```


## Check if MAVROS topics are being published:

```bash
ros2 topic list
```

If this is working you should see topics being printed on the terminal/console:

```bash
/diagnostics
/mavros/uas_1/actuator_control
/mavros/uas_1/altitude
/mavros/uas_1/battery
/mavros/uas_1/estimator_status
/mavros/uas_1/extended_state
/mavros/uas_1/geofence/fences
/mavros/uas_1/global_position/compass_hdg
/mavros/uas_1/global_position/global
/mavros/uas_1/global_position/gp_lp_offset
/mavros/uas_1/global_position/gp_origin
/mavros/uas_1/global_position/local
/mavros/uas_1/global_position/raw/fix
/mavros/uas_1/global_position/raw/gps_vel
/mavros/uas_1/global_position/raw/satellites
/mavros/uas_1/global_position/rel_alt
/mavros/uas_1/global_position/set_gp_origin
/mavros/uas_1/home_position/home
/mavros/uas_1/home_position/set
/mavros/uas_1/imu/data
/mavros/uas_1/imu/data_raw
/mavros/uas_1/imu/diff_pressure
/mavros/uas_1/imu/mag
/mavros/uas_1/imu/static_pressure
/mavros/uas_1/imu/temperature_baro
/mavros/uas_1/imu/temperature_imu
/mavros/uas_1/local_position/accel
/mavros/uas_1/local_position/odom
/mavros/uas_1/local_position/pose
/mavros/uas_1/local_position/pose_cov
/mavros/uas_1/local_position/velocity_body
...
```

---

### Print GPS data in the terminal:


```bash
ros2 topic echo /mavros/uas_1/global_position/global
```

If this is working you should see data being printed on the terminal/console:

```bash
---
header:
  stamp:
    sec: 1758872495
    nanosec: 4019456
  frame_id: base_link
status:
  status: 0
  service: 1
latitude: 47.396722
longitude: 8.5481768
altitude: 97.46284832587813
position_covariance:
- 0.81
- 0.0
- 0.0
- 0.0
- 0.81
- 0.0
- 0.0
- 0.0
- 3.1684
position_covariance_type: 2
```
---